<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Segment input dataframe into windows as specified by breaks.
segment_data segments the input sensor dataframe into
  epoch windows with length specified in breaks. — segment_data • MIMSunit</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Segment input dataframe into windows as specified by breaks.
segment_data segments the input sensor dataframe into
  epoch windows with length specified in breaks. — segment_data" />
<meta property="og:description" content="This function accepts a dataframe of multi-channel signal, segments it
  into epoch windows with length specified in breaks." />






<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>
<script async="" defer="" src="https://buttons.github.io/buttons.js"></script>
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-38342303-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-38342303-3');
</script>



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">MIMSunit</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.11.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Get Started
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/mims_unit_from_files.html">Compute MIMS-unit from files</a>
    </li>
    <li>
      <a href="../articles/mims_unit_from_imported_data.html">Compute MIMS-unit from imported data</a>
    </li>
  </ul>
</li>
<li>
  <a href="../articles/datasets.html">Datasets</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Algorithm Walkthrough
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/conceptual_diagram.html">Step-by-step illustration</a>
    </li>
    <li>
      <a href="../articles/truncation_threshold.html">Deciding truncation threshold</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Performances
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/cross_device_consistency.html">Cross device consistency</a>
    </li>
    <li>
      <a href="../articles/edge_cases.html">Performance under edge conditions</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">API References</a>
</li>
<li>
  <a href="../news/index.html">Changelogs</a>
</li>
<li>
  <a href="../articles/faq.html">FAQs</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/mhealthgroup/mimsunit">
    <span class="fa fa-lg fa-github"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Segment input dataframe into windows as specified by breaks.
<code>segment_data</code> segments the input sensor dataframe into
  epoch windows with length specified in breaks.</h1>
    <small class="dont-index">Source: <a href='https://github.com/mhealthgroup/MIMSunit/blob/master/R/helper.R'><code>R/helper.R</code></a></small>
    <div class="hidden name"><code>segment_data.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function accepts a dataframe of multi-channel signal, segments it
  into epoch windows with length specified in breaks.</p>
    </div>

    <pre class="usage"><span class='fu'>segment_data</span><span class='op'>(</span><span class='va'>df</span>, <span class='va'>breaks</span>, st <span class='op'>=</span> <span class='cn'>NULL</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>df</th>
      <td><p>dataframe. Input dataframe of the multi-channel signal. The first
column is the timestamps in POSXlct format and the following columns are
accelerometer values.</p></td>
    </tr>
    <tr>
      <th>breaks</th>
      <td><p>character. An epoch length character that can be accepted by
cut.breaks function.</p></td>
    </tr>
    <tr>
      <th>st</th>
      <td><p>character or POSIXct timestamp. An optional start time you can set to
force the breaks generated by referencing this start time. If it is NULL, the
function will use the first timestamp in the timestamp column as start time to
generate breaks. This is useful when you are processing a stream of data and
want to use a common start time for segmenting data. Default is NULL.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>dataframe. The same format as the input dataframe, but with an extra
  column "SEGMENT" in the end specifies the epoch window a sample belongs to.</p>
    <h2 class="hasAnchor" id="how-is-it-used-in-mims-unit-algorithm-"><a class="anchor" href="#how-is-it-used-in-mims-unit-algorithm-"></a>How is it used in MIMS-unit algorithm?</h2>

    <p>This function is a utility
  function that was used in various part in the algorithm whenever we need to
  segment a dataframe, e.g., before aggregating values over epoch windows.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Other utility functions: 
<code><a href='clip_data.html'>clip_data</a>()</code>,
<code><a href='cut_off_signal.html'>cut_off_signal</a>()</code>,
<code><a href='interpolate_signal.html'>interpolate_signal</a>()</code>,
<code><a href='parse_epoch_string.html'>parse_epoch_string</a>()</code>,
<code><a href='sampling_rate.html'>sampling_rate</a>()</code>,
<code><a href='simulate_new_data.html'>simulate_new_data</a>()</code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='r-in'>  <span class='co'># Use sample data</span></span>
<span class='r-in'>  <span class='va'>df</span> <span class='op'>=</span> <span class='va'>sample_raw_accel_data</span></span>
<span class='r-in'></span>
<span class='r-in'>  <span class='co'># segment data into 1 minute segments</span></span>
<span class='r-in'>  <span class='va'>output</span> <span class='op'>=</span> <span class='fu'>segment_data</span><span class='op'>(</span><span class='va'>df</span>, <span class='st'>"1 min"</span><span class='op'>)</span></span>
<span class='r-in'></span>
<span class='r-in'>  <span class='co'># check the 3rd segment, each segment would have 1 minute data</span></span>
<span class='r-in'>  <span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>output</span><span class='op'>[</span><span class='va'>output</span><span class='op'>[</span><span class='st'>'SEGMENT'</span><span class='op'>]</span> <span class='op'>==</span> <span class='fl'>3</span>,<span class='op'>]</span><span class='op'>)</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  HEADER_TIME_STAMP       X             Y             Z          SEGMENT   </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  Min.   :NA        Min.   : NA   Min.   : NA   Min.   : NA   Min.   : NA  </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  1st Qu.:NA        1st Qu.: NA   1st Qu.: NA   1st Qu.: NA   1st Qu.: NA  </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  Median :NA        Median : NA   Median : NA   Median : NA   Median : NA  </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  Mean   :NA        Mean   :NaN   Mean   :NaN   Mean   :NaN   Mean   :NaN  </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  3rd Qu.:NA        3rd Qu.: NA   3rd Qu.: NA   3rd Qu.: NA   3rd Qu.: NA  </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  Max.   :NA        Max.   : NA   Max.   : NA   Max.   : NA   Max.   : NA  </span>
<span class='r-in'></span>
<span class='r-in'>  <span class='co'># segment data into 15 second segments</span></span>
<span class='r-in'>  <span class='va'>output</span> <span class='op'>=</span> <span class='fu'>segment_data</span><span class='op'>(</span><span class='va'>df</span>, <span class='st'>"15 sec"</span><span class='op'>)</span></span>
<span class='r-in'></span>
<span class='r-in'>  <span class='co'># check the 1st segment, each segment would have 15 second data</span></span>
<span class='r-in'>  <span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>output</span><span class='op'>[</span><span class='va'>output</span><span class='op'>[</span><span class='st'>'SEGMENT'</span><span class='op'>]</span> <span class='op'>==</span> <span class='fl'>1</span>,<span class='op'>]</span><span class='op'>)</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  HEADER_TIME_STAMP                      X               Y            </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  Min.   :2016-01-15 11:00:00.00   Min.   :0.129   Min.   :-2.715000  </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  1st Qu.:2016-01-15 11:00:01.50   1st Qu.:1.004   1st Qu.:-0.309000  </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  Median :2016-01-15 11:00:03.00   Median :1.205   Median :-0.125000  </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  Mean   :2016-01-15 11:00:03.00   Mean   :1.273   Mean   :-0.008275  </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  3rd Qu.:2016-01-15 11:00:04.50   3rd Qu.:1.583   3rd Qu.: 0.011000  </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  Max.   :2016-01-15 11:00:06.00   Max.   :2.652   Max.   : 2.871000  </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>        Z              SEGMENT </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  Min.   :-1.7300   Min.   :1  </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  1st Qu.:-0.3490   1st Qu.:1  </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  Median :-0.1840   Median :1  </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  Mean   :-0.2462   Mean   :1  </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  3rd Qu.:-0.0740   3rd Qu.:1  </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  Max.   : 1.1090   Max.   :1  </span>
<span class='r-in'></span>
<span class='r-in'>  <span class='co'># segment data into 1 hour segments</span></span>
<span class='r-in'>  <span class='va'>output</span> <span class='op'>=</span> <span class='fu'>segment_data</span><span class='op'>(</span><span class='va'>df</span>, <span class='st'>"1 hour"</span><span class='op'>)</span></span>
<span class='r-in'></span>
<span class='r-in'>  <span class='co'># because the input data has only 15 minute data</span></span>
<span class='r-in'>  <span class='co'># there will be only 1 segment in the output</span></span>
<span class='r-in'>  <span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>output</span><span class='op'>[</span><span class='st'>'SEGMENT'</span><span class='op'>]</span><span class='op'>)</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>   SEGMENT</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 1       1</span>
<span class='r-in'>  <span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>output</span><span class='op'>)</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  HEADER_TIME_STAMP                      X               Y            </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  Min.   :2016-01-15 11:00:00.00   Min.   :0.129   Min.   :-2.715000  </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  1st Qu.:2016-01-15 11:00:01.50   1st Qu.:1.004   1st Qu.:-0.309000  </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  Median :2016-01-15 11:00:03.00   Median :1.205   Median :-0.125000  </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  Mean   :2016-01-15 11:00:03.00   Mean   :1.273   Mean   :-0.008275  </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  3rd Qu.:2016-01-15 11:00:04.50   3rd Qu.:1.583   3rd Qu.: 0.011000  </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  Max.   :2016-01-15 11:00:06.00   Max.   :2.652   Max.   : 2.871000  </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>        Z              SEGMENT </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  Min.   :-1.7300   Min.   :1  </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  1st Qu.:-0.3490   1st Qu.:1  </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  Median :-0.1840   Median :1  </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  Mean   :-0.2462   Mean   :1  </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  3rd Qu.:-0.0740   3rd Qu.:1  </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  Max.   : 1.1090   Max.   :1  </span>
<span class='r-in'></span>
<span class='r-in'>  <span class='co'># use manually set start time</span></span>
<span class='r-in'>  <span class='va'>output</span> <span class='op'>=</span> <span class='fu'>segment_data</span><span class='op'>(</span><span class='va'>df</span>, <span class='st'>"15 sec"</span>, st<span class='op'>=</span><span class='st'>'2016-01-15 10:59:50.000'</span><span class='op'>)</span></span>
<span class='r-in'></span>
<span class='r-in'>  <span class='co'># check the 1st segment, because the start time is 10 seconds before the</span></span>
<span class='r-in'>  <span class='co'># start time of the actual data, the first segment will only include 5 second</span></span>
<span class='r-in'>  <span class='co'># data.</span></span>
<span class='r-in'>  <span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>output</span><span class='op'>[</span><span class='va'>output</span><span class='op'>[</span><span class='st'>'SEGMENT'</span><span class='op'>]</span> <span class='op'>==</span> <span class='fl'>1</span>,<span class='op'>]</span><span class='op'>)</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  HEADER_TIME_STAMP                      X               Y            </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  Min.   :2016-01-15 11:00:00.00   Min.   :0.129   Min.   :-2.715000  </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  1st Qu.:2016-01-15 11:00:01.25   1st Qu.:1.004   1st Qu.:-0.312500  </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  Median :2016-01-15 11:00:02.50   Median :1.223   Median :-0.125000  </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  Mean   :2016-01-15 11:00:02.50   Mean   :1.276   Mean   :-0.006125  </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  3rd Qu.:2016-01-15 11:00:03.74   3rd Qu.:1.582   3rd Qu.: 0.020000  </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  Max.   :2016-01-15 11:00:04.99   Max.   :2.652   Max.   : 2.871000  </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>        Z             SEGMENT </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  Min.   :-1.730   Min.   :1  </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  1st Qu.:-0.350   1st Qu.:1  </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  Median :-0.184   Median :1  </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  Mean   :-0.251   Mean   :1  </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  3rd Qu.:-0.074   3rd Qu.:1  </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  Max.   : 1.109   Max.   :1  </span>
</pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://qutang.dev'><img class='img-circle p-3' src="https://d33wubrfki0l68.cloudfront.net/8af2089476f179254b3bc9628e13f7d143acab42/8309e/images/avatar.jpg" height="40" /><span> Qu Tang</span></a>, <a href='https://bouve.northeastern.edu/directory/dinesh-john/'><img class='img-circle p-3' src="https://banner2.kisspng.com/20180410/bbw/kisspng-avatar-user-medicine-surgery-patient-avatar-5acc9f7a7cb983.0104600115233596105109.jpg" height="40" /><span> Dinesh John</span></a>, <a href='http://www.ccs.neu.edu/home/intille/'><img class='img-circle p-3' src="http://www.ccs.neu.edu/home/intille/intille-headshot-sm2.jpg" height="40" /><span> Stephen Intille</span></a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


